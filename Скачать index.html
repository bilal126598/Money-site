
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Money-—Å–∞–π—Ç</title>
  <style>
    body {
      background-color: #1f1f1f;
      color: #ffffff;
      font-family: monospace;
      padding: 20px;
    }
    h1 {
      color: #00ffaa;
    }
    textarea {
      width: 100%;
      height: 200px;
      background: #2b2b2b;
      color: #ffffff;
      border: 1px solid #555;
      padding: 10px;
      font-size: 16px;
      margin-bottom: 20px;
    }
    button {
      padding: 10px 20px;
      background-color: #00ffaa;
      color: black;
      border: none;
      cursor: pointer;
      font-size: 16px;
    }
    .output {
      margin-top: 20px;
      background: #2b2b2b;
      padding: 10px;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
  <h1>üí∏ Money-—Å–∞–π—Ç</h1>
  <p>–í—Å—Ç–∞–≤—å —Å—é–¥–∞ —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–≤–æ–¥–æ–≤:</p>
  <textarea id="input"></textarea>
  <button onclick="process()">–ü–æ—Å—á–∏—Ç–∞—Ç—å</button>
  <div class="output" id="output"></div>

  <script>
    const bankMap = {
      '–ó–ê–ò–†–ê': 'üè¶üî∏',
      '–ú–ê–ö–°–ò–ú': 'üè¶üî∏',
      '–Æ–°–£–§': 'üè¶üî∏',
      '–°–ò–î–†–ê–¢': 'üè¶üî∏',
      '–õ–ê–†–ò–°–ê': 'üè¶üî∏',
      '–†–ê–î–ñ–ê–ë': 'üè¶üî∏',
      '–°–ê–ë–ò–†': 'üè¶üî∏',
      '–ò–ë–†–ê –¢': 'üè¶üî∏',
      '–ö–£–†–ë–ê–ù': 'üè¶üî∏',
      '–§–ê–ò–ù–ê': 'üè¶üîπ',
      '–ò–ë–†–ê': 'üè¶üîπ',
      '–ì–ê–î–ñ–ò': 'üè¶üü£',
      '–ì–ê–î–ñ–ò–ú–£–†–ê–î': 'üè¶üü£',
      '–ò–°–õ–ê–ú': 'üè¶üü£',
      '–ê–ë–î–£–õ': 'üè¶üü£',
      '–®–ï–ô–•': 'üè¶üü£',
      '–®–ï–ô–•–ú–£–°–¢–ê–§–ê': 'üè¶üü£',
      '–î–ê–í–ò–î': 'üè¶üü£',
      '–ú–£–ì': 'üè¶üü£',
      '–ú–£–ì–ú–ê': 'üè¶üü£',
      '–°–ê–õ–ò–ú–ê–¢': 'üè¶üü£'
    };

    function process() {
      const text = document.getElementById("input").value;
      const lines = text.split("\n");
      const people = {};

      for (let line of lines) {
        line = line.replace(/\(.*?\)/g, "");
        const parts = line.trim().split(" ");
        const name = parts.shift().toUpperCase();
        if (!name) continue;
        const sums = parts.filter(x => /^[\d.]+—Ç?$/.test(x));
        if (!sums.length) continue;

        const normalName = `**<b>${name}</b>**`;
        const bank = bankMap[name] || '';

        if (!people[normalName]) people[normalName] = { bank, amounts: [] };
        for (let s of sums) {
          let num = parseFloat(s.replace('—Ç', '')) * (s.includes('—Ç') ? 1000 : 1000);
          people[normalName].amounts.push(num);
        }
      }

      let out = "";
      let total = 0;
      for (let name in people) {
        const group = {};
        people[name].amounts.forEach(a => {
          group[a] = (group[a] || 0) + 1;
        });
        let line = `${name} ${people[name].bank}\n`;
        for (let sum in group) {
          line += `‚Äî ${sum}‚ÇΩ √ó ${group[sum]}\n`;
          total += parseFloat(sum) * group[sum];
        }
        out += line + "\n";
      }
      out += `\n<b>üí∞ –û–ë–©–ê–ö: ${total.toLocaleString("ru-RU")}‚ÇΩ</b>`;
      document.getElementById("output").innerHTML = out;
    }
  </script>
</body>
</html>
